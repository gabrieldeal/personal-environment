#!/bin/bash
# -*- shell-script -*-

EMACS_URL=http://ftp.gnu.org/gnu/emacs/emacs-24.5.tar.gz
TINYDESK_URL=https://raw.githubusercontent.com/jaalto/project-emacs--tinydesk/master/tinydesk.el

setup_clever_cmd() {
    local dir="$HOME/projects/clever-cmd"

    [ -e "$dir/clever-cmd.el" ] && return 0

    mkdir -p "$dir" \
	&& git clone git@github.com:gabrielmdeal/clever-cmd.git "$dir"
}

cd ~/ \
    && setup_clever_cmd \
    && (test -d config || git clone git@github.com:gabrielmdeal/personal-environment.git config) \
    && for f in config/.??* ; do rm -f `basename $f` && ln -s $f; done \
    && (mkdir -p ~/.emacs.d/manual && cd ~/.emacs.d/manual && wget $TINYDESK_URL) \
    && cd /tmp \
    && (test -f emacs-24.5.tar.gz || wget $EMACS_URL) \
    && (test -d emacs-24.5 || tar zxvf emacs-24.5.tar.gz) \
    && (which emacs || sudo apt-get -y remove emacs24) \
    && (sudo apt-get -y install libncurses-dev && cd emacs-24.5 && ./configure && make && sudo make install)

